<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LogCabin: LogCabin::Tree::Tree Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LogCabin
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceLogCabin.html">LogCabin</a>      </li>
      <li class="navelem"><a class="el" href="namespaceLogCabin_1_1Tree.html">Tree</a>      </li>
      <li class="navelem"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html">Tree</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">LogCabin::Tree::Tree Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="LogCabin::Tree::Tree" -->
<p>This is an in-memory, hierarchical key-value store.  
 <a href="classLogCabin_1_1Tree_1_1Tree.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Tree_8h_source.html">Tree.h</a>&gt;</code></p>

<p><a href="classLogCabin_1_1Tree_1_1Tree-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae4920d2c28718f0a0849eeb122294d87">Tree</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ae4920d2c28718f0a0849eeb122294d87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#aa49940755a23219782972a1065a6a0e4">dumpSnapshot</a> (google::protobuf::io::CodedOutputStream &amp;stream) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the tree to the given stream.  <a href="#aa49940755a23219782972a1065a6a0e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae1f63dee476fd7b7497685ecb7f68f48">loadSnapshot</a> (google::protobuf::io::CodedInputStream &amp;stream)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the tree from the given stream.  <a href="#ae1f63dee476fd7b7497685ecb7f68f48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a2b5a15e79385b3a6b9a7e5ae56f669f7">checkCondition</a> (const std::string &amp;path, const std::string &amp;contents) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that the file at path has the given contents.  <a href="#a2b5a15e79385b3a6b9a7e5ae56f669f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a8ad0192e15ad2e48b54d34027508d8df">makeDirectory</a> (const std::string &amp;path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure a directory exists at the given path.  <a href="#a8ad0192e15ad2e48b54d34027508d8df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae1b7cb5740d15dc4fb1d9d8164eabc2a">listDirectory</a> (const std::string &amp;path, std::vector&lt; std::string &gt; &amp;children) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">List the contents of a directory.  <a href="#ae1b7cb5740d15dc4fb1d9d8164eabc2a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ac6c6d96d5d915f58f8440bda1bd24f46">removeDirectory</a> (const std::string &amp;path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure a directory does not exist.  <a href="#ac6c6d96d5d915f58f8440bda1bd24f46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae42c424c3f7f051eb0eb36f9e6e6f2a0">write</a> (const std::string &amp;path, const std::string &amp;contents)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a file.  <a href="#ae42c424c3f7f051eb0eb36f9e6e6f2a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a9e1783faf522088b1a3b1053ca6cd356">read</a> (const std::string &amp;path, std::string &amp;contents) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the value of a file.  <a href="#a9e1783faf522088b1a3b1053ca6cd356"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae331d60164cbf7649a20d31228f1d76b">removeFile</a> (const std::string &amp;path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure a file does not exist.  <a href="#ae331d60164cbf7649a20d31228f1d76b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a5c6592f10128f3fea328d1a1b5e3e8b8">normalLookup</a> (const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;path, <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **parent)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve the final next-to-last component of the given path (the target's parent).  <a href="#a5c6592f10128f3fea328d1a1b5e3e8b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a9c84c47883180fe6464931bf723c5801">normalLookup</a> (const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;path, const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **parent) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve the final next-to-last component of the given path (the target's parent) -- const version.  <a href="#a9c84c47883180fe6464931bf723c5801"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a6d470728bbb9ee3108f1a846244e1b9c">mkdirLookup</a> (const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;path, <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **parent)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Like normalLookup but creates parent directories as necessary.  <a href="#a6d470728bbb9ee3108f1a846244e1b9c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a37a4968f520bac82d6bca93dca54a6a0">superRoot</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This directory contains the root directory.  <a href="#a37a4968f520bac82d6bca93dca54a6a0"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This is an in-memory, hierarchical key-value store. </p>
<p>TODO(ongaro): Document how this fits into the rest of the system. </p>

<p>Definition at line <a class="el" href="Tree_8h_source.html#l00277">277</a> of file <a class="el" href="Tree_8h_source.html">Tree.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae4920d2c28718f0a0849eeb122294d87"></a><!-- doxytag: member="LogCabin::Tree::Tree::Tree" ref="ae4920d2c28718f0a0849eeb122294d87" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae4920d2c28718f0a0849eeb122294d87">LogCabin::Tree::Tree::Tree</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00304">304</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa49940755a23219782972a1065a6a0e4"></a><!-- doxytag: member="LogCabin::Tree::Tree::dumpSnapshot" ref="aa49940755a23219782972a1065a6a0e4" args="(google::protobuf::io::CodedOutputStream &amp;stream) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#aa49940755a23219782972a1065a6a0e4">LogCabin::Tree::Tree::dumpSnapshot</a> </td>
          <td>(</td>
          <td class="paramtype">google::protobuf::io::CodedOutputStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write the tree to the given stream. </p>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00369">369</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae1f63dee476fd7b7497685ecb7f68f48"></a><!-- doxytag: member="LogCabin::Tree::Tree::loadSnapshot" ref="ae1f63dee476fd7b7497685ecb7f68f48" args="(google::protobuf::io::CodedInputStream &amp;stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae1f63dee476fd7b7497685ecb7f68f48">LogCabin::Tree::Tree::loadSnapshot</a> </td>
          <td>(</td>
          <td class="paramtype">google::protobuf::io::CodedInputStream &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load the tree from the given stream. </p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This will blow away any existing files and directories. </dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00378">378</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a2b5a15e79385b3a6b9a7e5ae56f669f7"></a><!-- doxytag: member="LogCabin::Tree::Tree::checkCondition" ref="a2b5a15e79385b3a6b9a7e5ae56f669f7" args="(const std::string &amp;path, const std::string &amp;contents) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a2b5a15e79385b3a6b9a7e5ae56f669f7">LogCabin::Tree::Tree::checkCondition</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>contents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify that the file at path has the given contents. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the file that must have the contents specified in 'contents'. </td></tr>
    <tr><td class="paramname">contents</td><td>The contents that the file specified by 'path' should have for an OK response. An OK response is also returned if 'contents' is the empty string and the file specified by 'path' does not exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>CONDITION_NOT_MET upon any error. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00386">386</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a8ad0192e15ad2e48b54d34027508d8df"></a><!-- doxytag: member="LogCabin::Tree::Tree::makeDirectory" ref="a8ad0192e15ad2e48b54d34027508d8df" args="(const std::string &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a8ad0192e15ad2e48b54d34027508d8df">LogCabin::Tree::Tree::makeDirectory</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Make sure a directory exists at the given path. </p>
<p>Create parent directories listed in path as necessary. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path where there should be a directory after this call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path exists but is a file. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00416">416</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae1b7cb5740d15dc4fb1d9d8164eabc2a"></a><!-- doxytag: member="LogCabin::Tree::Tree::listDirectory" ref="ae1b7cb5740d15dc4fb1d9d8164eabc2a" args="(const std::string &amp;path, std::vector&lt; std::string &gt; &amp;children) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae1b7cb5740d15dc4fb1d9d8164eabc2a">LogCabin::Tree::Tree::listDirectory</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>children</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List the contents of a directory. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">path</td><td>The directory whose direct children to list. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">children</td><td>This will be replaced by a listing of the names of the directories and files that the directory at 'path' immediately contains. The names of directories in this listing will have a trailing slash. The order is first directories (sorted lexicographically), then files (sorted lexicographically). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>LOOKUP_ERROR if a parent of path does not exist.</li>
<li>LOOKUP_ERROR if path does not exist.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path exists but is a file. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00435">435</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ac6c6d96d5d915f58f8440bda1bd24f46"></a><!-- doxytag: member="LogCabin::Tree::Tree::removeDirectory" ref="ac6c6d96d5d915f58f8440bda1bd24f46" args="(const std::string &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ac6c6d96d5d915f58f8440bda1bd24f46">LogCabin::Tree::Tree::removeDirectory</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Make sure a directory does not exist. </p>
<p>Also removes all direct and indirect children of the directory.</p>
<p>If called with the root directory, this will remove all descendants but not actually remove the root directory; it will still return status OK.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path where there should not be a directory after this call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path exists but is a file. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00464">464</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae42c424c3f7f051eb0eb36f9e6e6f2a0"></a><!-- doxytag: member="LogCabin::Tree::Tree::write" ref="ae42c424c3f7f051eb0eb36f9e6e6f2a0" args="(const std::string &amp;path, const std::string &amp;contents)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae42c424c3f7f051eb0eb36f9e6e6f2a0">LogCabin::Tree::Tree::write</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>contents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the value of a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path where there should be a file with the given contents after this call. </td></tr>
    <tr><td class="paramname">contents</td><td>The new value associated with the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>INVALID_ARGUMENT if contents are too large to fit in a file.</li>
<li>LOOKUP_ERROR if a parent of path does not exist.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path exists but is a directory. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00500">500</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9e1783faf522088b1a3b1053ca6cd356"></a><!-- doxytag: member="LogCabin::Tree::Tree::read" ref="a9e1783faf522088b1a3b1053ca6cd356" args="(const std::string &amp;path, std::string &amp;contents) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a9e1783faf522088b1a3b1053ca6cd356">LogCabin::Tree::Tree::read</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>contents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the value of a file. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path of the file whose contents to read. </td></tr>
    <tr><td class="paramname">contents</td><td>The current value associated with the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>LOOKUP_ERROR if a parent of path does not exist.</li>
<li>LOOKUP_ERROR if path does not exist.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path is a directory. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00521">521</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae331d60164cbf7649a20d31228f1d76b"></a><!-- doxytag: member="LogCabin::Tree::Tree::removeFile" ref="ae331d60164cbf7649a20d31228f1d76b" args="(const std::string &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#ae331d60164cbf7649a20d31228f1d76b">LogCabin::Tree::Tree::removeFile</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Make sure a file does not exist. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path where there should not be a file after this call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>INVALID_ARGUMENT if path is malformed.</li>
<li>TYPE_ERROR if a parent of path is a file.</li>
<li>TYPE_ERROR if path exists but is a directory. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00549">549</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a5c6592f10128f3fea328d1a1b5e3e8b8"></a><!-- doxytag: member="LogCabin::Tree::Tree::normalLookup" ref="a5c6592f10128f3fea328d1a1b5e3e8b8" args="(const Internal::Path &amp;path, Internal::Directory **parent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a5c6592f10128f3fea328d1a1b5e3e8b8">LogCabin::Tree::Tree::normalLookup</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resolve the final next-to-last component of the given path (the target's parent). </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path whose parent directory to find. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parent</td><td>Upon successful return, points to the target's parent directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>LOOKUP_ERROR if a parent of path does not exist.</li>
<li>TYPE_ERROR if a parent of path is a file. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00313">313</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9c84c47883180fe6464931bf723c5801"></a><!-- doxytag: member="LogCabin::Tree::Tree::normalLookup" ref="a9c84c47883180fe6464931bf723c5801" args="(const Internal::Path &amp;path, const Internal::Directory **parent) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a5c6592f10128f3fea328d1a1b5e3e8b8">LogCabin::Tree::Tree::normalLookup</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resolve the final next-to-last component of the given path (the target's parent) -- const version. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path whose parent directory to find. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parent</td><td>Upon successful return, points to the target's parent directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>LOOKUP_ERROR if a parent of path does not exist.</li>
<li>TYPE_ERROR if a parent of path is a file. </li>
</ul>
</dd></dl>
 
<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00320">320</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6d470728bbb9ee3108f1a846244e1b9c"></a><!-- doxytag: member="LogCabin::Tree::Tree::mkdirLookup" ref="a6d470728bbb9ee3108f1a846244e1b9c" args="(const Internal::Path &amp;path, Internal::Directory **parent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLogCabin_1_1Tree_1_1Result.html">Result</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a6d470728bbb9ee3108f1a846244e1b9c">LogCabin::Tree::Tree::mkdirLookup</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Path.html">Internal::Path</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> **&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Like normalLookup but creates parent directories as necessary. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The path whose parent directory to find. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parent</td><td>Upon successful return, points to the target's parent directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status and error message. Possible errors are:<ul>
<li>TYPE_ERROR if a parent of path is a file. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="Tree_8cc_source.html#l00348">348</a> of file <a class="el" href="Tree_8cc_source.html">Tree.cc</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a37a4968f520bac82d6bca93dca54a6a0"></a><!-- doxytag: member="LogCabin::Tree::Tree::superRoot" ref="a37a4968f520bac82d6bca93dca54a6a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Tree_1_1Internal_1_1Directory.html">Internal::Directory</a> <a class="el" href="classLogCabin_1_1Tree_1_1Tree.html#a37a4968f520bac82d6bca93dca54a6a0">LogCabin::Tree::Tree::superRoot</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This directory contains the root directory. </p>
<p>The super root has a single child directory named "root", and the rest of the tree lies below "root". This is just an implementation detail; this class prepends "/root" to every path provided by the caller.</p>
<p>This removes a lot of special-case branches because every operation now has a name of a target within a parent directory -- even those operating on the root directory. </p>

<p>Definition at line <a class="el" href="Tree_8h_source.html#l00464">464</a> of file <a class="el" href="Tree_8h_source.html">Tree.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Tree/<a class="el" href="Tree_8h_source.html">Tree.h</a></li>
<li>Tree/<a class="el" href="Tree_8cc_source.html">Tree.cc</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
